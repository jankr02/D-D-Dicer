<div class="roll-history">
  <div class="history-header">
    <div class="tab-navigation">
      <button
        class="tab-button"
        [class.active]="activeTab === 'history'"
        (click)="switchTab('history')"
        i18n="@@rollHistory.tab.history">
        Roll History
      </button>
      <button
        class="tab-button"
        [class.active]="activeTab === 'statistics'"
        (click)="switchTab('statistics')"
        i18n="@@rollHistory.tab.statistics">
        Statistics
      </button>
      <button
        class="tab-button"
        [class.active]="activeTab === 'probabilities'"
        (click)="switchTab('probabilities')"
        i18n="@@rollHistory.tab.probabilities">
        Probabilities
      </button>
    </div>

    <button class="clear-button" (click)="clearHistory()" i18n="@@rollHistory.button.clearHistory">Clear History</button>
  </div>

  @if (activeTab === 'history') {
    @if (history$ | async; as history) {
      @if (history.length > 0) {
        <div class="history-list">
          @for (result of history; track result.timestamp) {
            <app-roll-result-detail [result]="result"></app-roll-result-detail>
          }
        </div>
      } @else {
        <div class="empty-state">
          <p i18n="@@rollHistory.empty.noRolls">No rolls yet. Start rolling some dice!</p>
        </div>
      }
    }
  } @else if (activeTab === 'statistics') {
    <app-statistics-dashboard></app-statistics-dashboard>
  } @else if (activeTab === 'probabilities') {
    <app-probability-panel></app-probability-panel>
  }
</div>
